import React, { useContext } from 'react';
import { useRouteMatch } from 'react-router-dom';
import RegistryContext from '../../store/registeryContext';
import AsyncComponent from '@redhat-cloud-services/frontend-components/AsyncComponent';
import { useSelector } from 'react-redux';
import VulnerabilityEdgePrompt from '../VulnerabilityEdgePrompt';

const VulnerabilityTab = () => {
    const { params } = useRouteMatch('/:inventoryId');
    const { getRegistry } = useContext(RegistryContext);
    const systemProfile = useSelector(({ systemProfileStore }) => systemProfileStore?.systemProfile);
    const isEdgeHost = systemProfile?.host_type === 'edge';

    return isEdgeHost
        ? <VulnerabilityEdgePrompt/>
        : <AsyncComponent
            appName="vulnerability"
            module="./SystemDetail"
            getRegistry={getRegistry}
            customItnlProvider
            entity={{ id: params.inventoryId }}
        />;
};

export default VulnerabilityTab;

import React, { useContext } from 'react';
import { useParams } from 'react-router-dom';
import RegistryContext from '../../store/registeryContext';
import AsyncComponent from '@redhat-cloud-services/frontend-components/AsyncComponent';
import { useSelector } from 'react-redux';
import VulnerabilityEdgePrompt from '../VulnerabilityEdgePrompt';

const VulnerabilityTab = () => {
  const { inventoryId } = useParams();
  const { getRegistry } = useContext(RegistryContext);
  const systemProfile = useSelector(
    ({ systemProfileStore }) => systemProfileStore?.systemProfile
  );
  const isEdgeHost = systemProfile?.host_type === 'edge';

  return isEdgeHost ? (
    <VulnerabilityEdgePrompt />
  ) : (
    <AsyncComponent
      appName="vulnerability"
      module="./SystemDetail"
      getRegistry={getRegistry}
      customItnlProvider
      entity={{ id: inventoryId }}
    />
  );
};

export default VulnerabilityTab;
